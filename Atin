local TweenService = game:GetService("TweenService")
local Players = game:GetService("Players")
local TeleportService = game:GetService("TeleportService")
local ReplicatedStorage = game:GetService("ReplicatedStorage")

local player = Players.LocalPlayer

-- ðŸ”½ TELEPORT LIST ðŸ”½
local teleportList = {
    {name = "Teleport Pos 1", pos = Vector3.new(625.27, 1799.83, 3432.84)},
    {name = "PUNCAK", pos = Vector3.new(780.47, 2183.38, 3945.07)},
}

-- ðŸ”½ FUNGSI TELEPORT ðŸ”½
local function teleportTo(position)
	local character = player.Character or player.CharacterAdded:Wait()
	local hrp = character:WaitForChild("HumanoidRootPart")
	hrp.CFrame = CFrame.new(position)
end

-- ðŸ”½ SISTEM AUTO FARM ðŸ”½
local teleporting = false

local function autoFarmLoop()
	teleporting = true

	while teleporting do
		for i, data in ipairs(teleportList) do
			-- Teleport ke posisi
			teleportTo(data.pos)
			task.wait(1)

			-- Jika sudah sampai di PUNCAK â†’ langsung rejoin
			if data.name == "PUNCAK" then
				task.wait(1)
				TeleportService:Teleport(game.PlaceId, player) -- Rejoin ke server yang sama
				return -- hentikan loop
			end
		end
	end
end

-- ðŸ”½ MULAI OTOMATIS ðŸ”½
task.spawn(autoFarmLoop)

-- ðŸ”½ SISTEM TOGGLE (jika kamu pakai tombol UI) ðŸ”½
local function toggleAutoFarm(state)
    teleporting = state
    if teleporting then
        button.Text = "RUNNING..."
        button.BackgroundColor3 = Color3.fromRGB(0, 200, 0)
        task.spawn(autoFarmLoop)
    else
        button.Text = "STOPPED"
        button.BackgroundColor3 = Color3.fromRGB(200, 0, 0)
    end
end

if button then
	button.MouseButton1Click:Connect(function()
		toggleAutoFarm(not teleporting)
	end)
end
